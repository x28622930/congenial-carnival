
    <include file="Base:header" />
    <title data-n-head="true">{$Think.lang.history_edit_follow}</title>

    <link href="__PUBLIC__Qts/Home/css/common.css" rel="stylesheet">
    <link href="__PUBLIC__/Qts/Home/css/pcPublic.css" rel="stylesheet">
    <style data-vue-ssr-id="22069c72:0 309b0fcd:0 3c133394:0">
        .qts-content li {
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex
        }

        .qts-content li span {
            -webkit-box-flex: 1;
            -ms-flex: 1;
            flex: 1
        }

        .qts-content li span:first-child {
            display: inline-block;
            text-align: right;
            color: #ddd;
            font-size: .16rem;
            margin-right: .05rem;
            min-width: 1rem
        }

        .qts-content li span:last-child {
            display: inline-block;
            text-align: left;
            margin-left: .1rem
        }

        .mint-msgbox-title[data-v-cd4b7ab0] {
            text-align: center;
            padding: 0 .1rem;
            margin-bottom: 0;
            font-size: .16rem;
            font-weight: 700;
            color: #333
        }

        .mint-msgbox-message[data-v-cd4b7ab0] {
            font-size: .16rem;
            color: #ddd;
            margin: 0;
            text-align: center;
            line-height: .3rem;
            margin-top: .15rem;
            margin-bottom: .15rem
        }

        .mint-msgbox-btns[data-v-cd4b7ab0] {
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            height: 40px;
            line-height: 40px
        }

        .mint-msgbox-btn[data-v-cd4b7ab0] {
            line-height: 35px;
            display: block;
            background-color: #fff;
            -webkit-box-flex: 1;
            -ms-flex: 1;
            flex: 1;
            margin: 0;
            border: 0
        }

        .mint-msgbox-btn[data-v-cd4b7ab0]:focus {
            outline: none
        }

        .edtip[data-v-1698d7a7] {
            height: .32rem;
            padding: 0 .14rem;
            line-height: .32rem;
            font-size: 14px;
            color: #ddd;
            background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAAAXNSR0IArs4c6QAABJBJREFUWAmtWE2IHEUUrtczu/MTQVFkfyAKkT1NQJOj2eAhu1mMmDFZBjx6kPWiN3/AgywiitGjFxfE6GllWMgaDey6gmDiURENCIkLKkx2gxgEMz0zO93P91VPtdVjz0x3Mw27VV31fr5+9areV0Mqw+PWFh5SB+qIYjXLSs3CBCnVkH8NNaF2S/Wd39OaFf1kT3t5qeJ3/WVW/IxoTJPiG9I2iJwGLDD7ACTAaE7aPVJ0yck7G4WNreuYH/WMBNKsnj5MyntTHCyJsXVi51Lx+ONXaXXVjzPOq6tO6/vv5pl8AH5WAG+xyr1R3tz+I07ejA0F0jy78Ip866tE9GFxqvQ2rV1uGsUkLa88XW7tu68z8wuK6N3y5s77g/Rigeiv+uHqx2LgaKlQeIrqV/YGGUgyzrUz026nc0Wc/VScOvI8ra0d9Ov9DwivrEy09n+9waweLhXuL1O97vYrZXnnWq3U6typS4QrxWMnHxm0tKFtt7rwqSzJ5XBgzJ3m2VMsPj7pN5u3B5ATshwVicS8PT6o31penFNdddrMU56+Lmxs/2Le41pE2e3cudasLrxs54xjhLE7kJhBTiRbDuqqoz77H5g/70A9ZuwNarHUpcnJM7LfXwt8BpIhEGxR7I40icmk7toOnZz3j/0+qA8f2pf4NDIaCA4rnBPYomYiSeszRRyzl48AG2YDvuATviGngeDElP562nMi71DEcc6JRmgYkJ6v9Z7vAIgcz1VyaHOYYtycz040In3vcTr2GE7pXslQji5gRDPFR098awsl6RcmohHxc9H3UTZQKkRmGhgcVFEUsJEHTKzVQ5GIFLkdeY9VsQbhUxdPweBIwsxIEb9lzSfvVirR2nPv4UjOJDTUAJ1AsoJT6FKeUDEUC76INBjZjh5dvNgKJxN2QCPAafSuSagTKyZGgihw8h0TZwhAGlL5NMuKExg1Jro6L+RwS5Ufxi4IldhoOJIskh8seZLx6Z2ulD0is6CYDjimJOwcOEgWKEIXTERSJyp8wjcwOJroMt9q/XjtZBYg9F9EUi8NKKX43AMGHQXJ3E32uZoFiGy927Jj/pakvZ1WH7wWJBt6kidKofB4XW+7NFWaS1tvoJ/lAZ91992buXxuEUxfRwQdSdptEN20RvncqQfcc4tPcO3JB9Powpf43DLXjTBBQfnBtkF0kxrsnF867vrqJnv+N61OZ7d5fvFEEl340L7Ep5EPgQT3DrrgtttfgugagWGt53Vfkhy5DzKye+4hz39xmLyWE9vwIVlxwb7rhEAgVP585z1JvOtu+69oDRlgXRJt355ipj/t97g+mLz4+Bm+7PkIEEwUj80/J1vyNzD5UZEpTKp35Mu+EEB3Jeu/Kh0qv2Ubt/uwBQavrxNyt7Hn0Ne7pn8wuNvsfhQw+jFdsGQ5EG39oTHX1VggBthYr5zIib7lMH7QDgUCAesSjvvLZ6CUYHODiJS+rsop3Tsgx3MJBxDzhD9LCL+VC/WMZlZCqGTRNZeRL5IKzjO6dkjJwGk91p8lDBC7NT/UiFNUbUMhhE5IJc/4Q82/AQcU2GgYSJMAAAAASUVORK5CYII=) no-repeat .14rem;
            background-size: .15rem .15rem;
            text-indent: .2rem
        }

        .edtip a[data-v-1698d7a7] {
            color: #77abf4;
        }

        .changeways[data-v-1698d7a7] {
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            padding: .24rem .14rem .1rem
        }

        .changeleft[data-v-1698d7a7] {
            width: 30%;
            font-size: 16px;
            color: #ddd;
            letter-spacing: 0;
            text-align: left;
            height: .4rem;
            line-height: .4rem
        }

        .changeright[data-v-1698d7a7] {
            width: 70%
        }

        .changeright a[data-v-1698d7a7] {
            display: inline-block;
            background: #c8c8c8;
            border-radius: 2px;
            height: .4rem;
            font-size: 14px;
            color: #fff;
            letter-spacing: 0;
            text-align: center;
            line-height: .4rem;
            float: left;
            padding: 0 .05rem
        }

        .changeright a[data-v-1698d7a7]:nth-child(2) {
            margin-left: .05rem
        }

        .changeright .on[data-v-1698d7a7] {
            background: #77abf4;
            color: #fff
        }

        .tipcontent[data-v-1698d7a7] {
            width: 70%;
            float: right;
            padding: 0 .05rem;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            font-size: 12px;
            color: #ddd;
            letter-spacing: 0;
            text-align: left
        }

        .inputnum[data-v-1698d7a7] {
            clear: both;
            padding: 0 .14rem
        }

        .con-txt[data-v-1698d7a7] {
            display: inline-block;
            width: 30%;
            height: .4rem;
            line-height: .4rem;
            text-align: left;
            font-size: .14rem
        }

        .con-right[data-v-1698d7a7] {
            width: 70%;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex
        }

        .ipt-btn[data-v-1698d7a7] {
            line-height: .4rem;
            text-align: center;
            font-size: .16rem;
            border-radius: .05rem;
            /*background-image: -o-linear-gradient(319deg, #1254a8 0, #0c62c1 100%);*/
            /*background-image: linear-gradient(-229deg, #1254a8, #0c62c1);*/
            background: #77abf4;
            color: #fff;
            width: 30%;
            margin: .5rem auto

        }

        .taparea em[data-v-1698d7a7] {
            line-height: .4rem
        }

        /*body {*/
            /*background: #ffffff*/
        /*}*/
        /*新增css*/
        body, html {
          height: 100%;
          width: 100%;
          background: #262b41 !important;
        }
        .page-main {
          background: #212139;
          min-height: 600px;
          margin: 30px auto !important;
          padding: 0 80px !important;
        }
        .page-main h3 {
          line-height: 110px;
          text-align: center;
          position: relative;
        }
        .page-main h3 span {
          color: #ddd;
        }
        .page-main h3 a {
          position: absolute;
          font-size: 14px;
          color: #77abf4;
          top: 0;
          right: 160px;
        }
        .page-main .content {
          padding: 40px 80px;
          background: #262b41;
        }
    </style>
</head>
<body>
<div id="__nuxt">
    <div class="progress" data-v-4a8a9a01=""
         style="width: 0%; height: 2px; background-color: rgb(1, 40, 97); opacity: 0;"></div>
    <div data-v-1698d7a7="" class="content">
        <!--<div data-v-1698d7a7="" id="head" style="width: 60%">-->
            <!--<div class="head_content"><h3 class="product-name"><span>{$Think.lang.history_edit_follow}</span><em></em></h3>-->
                <!--<div class="left" onclick="window.history.back()"><a class="arrow_left"></a></div>-->
                <!--<notempty name="follow['user_id']">-->
                    <!--<div class="right arrow_right" onclick="cancelFollow();"><b>{$Think.lang.orderfollow_cancel}</b></div>-->
                <!--</notempty>-->
            <!--</div>-->
        <!--</div>-->
        <!--引入导航条-->
        <include file="Base:footer" />

        <section data-v-1698d7a7="" class="page-main">
          <h3>
            <span>{$Think.lang.history_edit_follow}</span>
            <a href="javascript: void (0);" onclick="window.history.back()">{$Think.lang.back}</a>
          </h3>

            <div class="content">
              <p data-v-1698d7a7="" class="edtip">{$Think.lang.orderfollow_reading}
                <a data-v-1698d7a7="" href="{:U('agreementFollow')}">《{$Think.lang.orderfollow_agreement}》</a>
              </p>

              <div data-v-1698d7a7="" class="changeways">
                <div data-v-1698d7a7="" class="changeleft">{$Think.lang.orderfollow_way}</div>
                <div data-v-1698d7a7="" class="changeright">
                  <if condition="$follow['follow_type'] eq 2">
                    <a data-v-1698d7a7="" href="javascript:;;" class="" data-type="1">{$Think.lang.orderfollow_fixed_ratio}</a>
                    <a data-v-1698d7a7="" href="javascript:;;" class="on" data-type="2">{$Think.lang.orderfollow_fixed_hand}</a>
                    <else/>
                    <a data-v-1698d7a7="" href="javascript:;;" class="on" data-type="1">{$Think.lang.orderfollow_fixed_ratio}</a>
                    <a data-v-1698d7a7="" href="javascript:;;" class="" data-type="2">{$Think.lang.orderfollow_fixed_hand}</a>
                  </if>

                </div>
              </div>

              <div data-v-1698d7a7="" class="tipcontent">
                <p data-v-1698d7a7="">{$Think.lang.orderfollow_des1}</p>
                <p data-v-1698d7a7="" style="margin-top: 0.15rem;">
                  ({$Think.lang.orderfollow_des2}）</p>
              </div>

              <div data-v-1698d7a7="" class="inputnum bei">
                <span data-v-1698d7a7="" class="con-txt">{$Think.lang.orderfollow_multiple}</span>
                <div data-v-1698d7a7="" class="con-right right taparea">
                  <em data-v-1698d7a7="" class="icon-min minusBtn" onclick="addBySubtract(2,0.1,1,this)"></em>
                  <input data-v-1698d7a7="" step="0.1" id="multiple" type="number" value="{$follow.follow_multiple}" class="handnum hands" onkeyup="hands(this)">
                  <em data-v-1698d7a7="" class="icon-add addBtn" onclick="addBySubtract(1,0.1,1,this)"></em>
                </div>
              </div>

              <div data-v-1698d7a7="" class="inputnum shou" style="display: none">
                <span data-v-1698d7a7="" class="con-txt">{$Think.lang.orderfollow_hand}</span>
                <div data-v-1698d7a7="" class="con-right right taparea">
                  <em data-v-1698d7a7="" class="icon-min minusBtn" onclick="addBySubtract(2,0.01,2,this)"></em>
                  <input data-v-1698d7a7="" id="number" value="{$follow.follow_number}" type="number" class="handnum hands" onkeyup="handNums(this)">
                  <em data-v-1698d7a7=""  class="icon-add addBtn" onclick="addBySubtract(1,0.01,2,this)"></em>
                </div>
              </div>
            </div>




            <div data-v-1698d7a7="" class="ipt-btn" onclick="followSubmit();">{$Think.lang.orderfollow_determine}</div>
        </section>

        <include file="Base:trueFooter" />
    </div>
</div>


<script src="__PUBLIC__Qts/Home/js/jquery.js"></script>
<script type="text/javascript" src="__PUBLIC__/Home/css/layer/layer.js"></script>
<script>

    /**
     * [addBySubtract 跟随数量增减]
     * @param {[int]}       type [1加 2减]
     * @param {[float]}     num  [操作的数值]
     * @param {[int]}    length  [小数位长度]
     * @param {[object]}    obj  [当前DOM]
     */
    function addBySubtract(type,num,length,obj)
    {
        if(type == 1)
        {
            var value = parseFloat($(obj).siblings('input').val());
            value += num;
            $(obj).siblings('input').val(value.toFixed(length));
        } else {
            var value = parseFloat($(obj).siblings('input').val());
            value -= num;
            value < num ? value = num : value
            $(obj).siblings('input').val(value.toFixed(length));
        }
    }

    /**
     * [followSubmit 编辑跟随]
     * @author wang 990529346@qq.com
     */
    function followSubmit()
    {
        var index   = layer.load(2);

        var uid     = "{$uid}";
        var type    = $('.changeright > .on').attr('data-type');

        if(type == 1)
            var numerical = $('#multiple').val();
        else
            var numerical = $('#number').val();

        $.ajax({
            url:"{:U('followSubmit')}",
            dataType:'json',
            type:'post',
            data:{'type':type,'numerical':numerical,'uid':uid},
            success:function(data){
                if(data.code == 200)
                {
                    layer.close(index);
                    layer.msg(data.msg);
                    return setTimeout("window.location.href='{:U('Index/index')}'",800);
                } else {
                    layer.close(index);
                    return layer.msg(data.msg);
                }
            },
        });
    }

    /**
     * [followSubmit 取消跟随]
     * @author wang 990529346@qq.com
     */
    function cancelFollow()
    {
        var index   = layer.load(2);
        var uid     = "{$uid}";

        $.ajax({
            url:"{:U('cancelFollow')}",
            dataType:'json',
            type:'post',
            data:{'uid':uid},
            success:function(data){
                if(data.code == 200)
                {
                    layer.close(index);
                    layer.msg(data.msg);
                    return setTimeout("window.location.reload()",800);
                } else {
                    layer.close(index);
                    return layer.msg(data.msg);
                }
            },
        });
    }

    //切换列表
    $('.changeright a').click(function () {
        $('.changeright a').removeClass('on')
        $(this).addClass('on')
        if ($('.changeright a:last-child').hasClass('on')) {
            $('.tipcontent p:last-child').hide();
            $('.bei').hide();
            $('.shou').show();
        } else {
            $('.tipcontent p:last-child').show();
            $('.bei').show();
            $('.shou').hide();
        }
    });


    function hands(obj)
    {
        var val = $(obj).val().replace(/^(\-)*(\d+)\.(\d\d).*$/,'$1$2.$2');

        if(val < 0){
            val  = 0.1;
        } else if(val > 100) {
            val = 100;
        }

        $(obj).val(val);
        // tips('multiple');
    }

    function handNums(obj)
    {
        var val = $(obj).val().replace(/^(\-)*(\d+)\.(\d\d).*$/,'$1$2.$3');

        if(val < 0){
            val  = 0.01;
        } else if(val > 30)
        {
            val = 30;
        }

        $(obj).val(val);
        // tips('number');
    }

    // iframe  父页面怎么操作引入的子页面中的 标签元素啥的，
    // 子页面是别人的域名，。现在有个跨域问题，不能直接操作。
    // 有大佬知道怎么解决吗

    //我现在iframe要引入baidu.com,我要在父页面中直接js操作子页面的内容，能不能操作。

    //tips提示
    function tips(dom='')
    {
        var balance = "{$user['balance']}";
        layer.tips('请谨慎设置，当前余额：'+balance+'', '#'+dom+'', {
          tips: [1, '#3595CC'],
          time: 1000
        });
    }

</script>
</body>
</html>