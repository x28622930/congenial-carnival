<include file="Base:header" />
<title data-n-head="true">{$Think.lang.bind_mailbox}</title>
<link href="__PUBLIC__/Qts/Home/css/common.css" rel="stylesheet">
<link href="__PUBLIC__/Qts/Home/css/pcPublic.css" rel="stylesheet">
<style data-vue-ssr-id="4cddb420:0 cf79f97a:0">


	.login_footers > div[data-v-2d3e0ef2]:first-of-type {
		float: left
	}

	.login_footers > div[data-v-2d3e0ef2]:nth-of-type(2) {
		position: relative;
		float: right;
		color: #ffbf23;
		padding-right: .15rem
	}

	label[data-v-4221f031] {
		display: block
	}

	.form[data-v-4221f031] {
		font-size: .14rem;
		padding: 0 .14rem;
		background: #171520;
	}

	.form > div[data-v-4221f031] {
		height: .5rem;
		line-height: .5rem
	}

	input[data-v-4221f031] {
		height: .3rem;
		line-height: .3rem
	}

	.form-item1[data-v-4221f031], .form-item2[data-v-4221f031] {
		position: relative
	}

	.form-item1 > dl[data-v-4221f031] {
		width: .16rem;
		height: .16rem;
		position: absolute;
		top: .17rem;
		right: .14rem
	}

	.btnYzm[data-v-4221f031] {
		color: #ddd;
		position: absolute;
		right: .14rem;
		top: 0;
        cursor: pointer;
	}

	.exitOut[data-v-4221f031] {
		height: .4rem;
		line-height: .4rem;
		color: #fff;
		font-size: .16rem;
		/*margin-top: .4rem;*/
		margin: .4rem auto 0;
		text-align: center;
		border-radius: 0.05rem;
		background: #77abf4;
        width: 30%;
        cursor: pointer;
	}

	.form-item1[data-v-4221f031]:before, .form-item2[data-v-4221f031]:before {
		content: "";
		position: absolute;
		width: 200%;
		bottom: 0;
		border-bottom: 1px solid #e2e5e8;
		-webkit-transform-origin: 0 0;
		-ms-transform-origin: 0 0;
		transform-origin: 0 0;
		-webkit-transform: scale(.5);
		-ms-transform: scale(.5);
		transform: scale(.5);
		-webkit-box-sizing: border-box;
		box-sizing: border-box
	}

	.form[data-v-525c5c54] {
		padding: 0 .14rem;
		font-size: .14rem;
		background: #fff
	}

	.form > div[data-v-525c5c54] {
		height: .45rem;
		line-height: .45rem
	}

	.form input[data-v-525c5c54] {
		height: .3rem;
		line-height: .3rem;
		width: 80%
	}

	.form-item1[data-v-525c5c54]:before, .form-item2[data-v-525c5c54]:before {
		content: "";
		position: absolute;
		width: 200%;
		bottom: 0;
		border-bottom: 1px solid #e2e5e8;
		-webkit-transform-origin: 0 0;
		-ms-transform-origin: 0 0;
		transform-origin: 0 0;
		-webkit-transform: scale(.5);
		-ms-transform: scale(.5);
		transform: scale(.5);
		-webkit-box-sizing: border-box;
		box-sizing: border-box
	}

	.form-item1[data-v-525c5c54], .form-item2[data-v-525c5c54] {
		position: relative
	}

	.form-item1 > dl[data-v-525c5c54] {
		width: .16rem;
		height: .16rem;
		position: absolute;
		top: .17rem;
		right: .14rem
	}

	.form-item2 > p[data-v-525c5c54] {
		top: .2rem;
		right: 0
	}

	label[data-v-7ccdb03b] {
		display: block;
		border-bottom: 1px solid #e2e5e8
	}

	input[data-v-7ccdb03b] {
		display: block;
		line-height: .5rem;
		top: .2rem;
		width: 80%;
		-webkit-box-sizing: border-box;
		box-sizing: border-box
	}

	label .icon_s[data-v-7ccdb03b] {
		position: absolute;
		display: block;
		right: 0;
		top: .15rem;
		background-size: 100%
	}

	p[data-v-7ccdb03b] {
		padding: .09rem .14rem .47rem;
		color: #999;
		font-size: .12rem
	}

	span[data-v-7ccdb03b] {
		color: #77abf4;
	}
	.newyzmColor[data-v-4221f031], .yzmColor[data-v-4221f031] {
		color: #77abf4;
	}
	.btnColor, .newbtnColor{
		/*background-image: -o-linear-gradient(319deg,#1254a8 0,#0c62c1 100%)!important;*/
		/*background-image: linear-gradient(-229deg,#1254a8,#0c62c1)!important;*/
		background: #77abf4;
		color: #fff;
	}
	/*body {*/
		/*background: #ffffff*/
	/*}*/
    /*新增css*/
    body, html {
      height: 100%;
      width: 100%;
      background: #262b41 !important;
    }
    .page-main {
      background: #212139;
      min-height: 600px;
      margin: 30px auto !important;
      padding: 0 80px !important;
    }
    .page-main h3 {
      line-height: 110px;
      text-align: center;
      position: relative;
    }
	.page-main h3 span {
		color: #ddd;
	}
    .page-main h3 a {
      position: absolute;
      font-size: 14px;
      color: #77abf4;
      top: 0;
      right: 160px;
    }
    .page-main .form {
      padding: 40px 80px;
      background: #262b41;
    }
</style>
</head>
<body class="">
<div id="__nuxt">
	<div class="progress" data-v-4a8a9a01=""
	     style="width: 0%; height: 2px; background-color: rgb(1, 40, 97); opacity: 0;"></div>
	<div data-v-4221f031="" class="content">
		<!--<div data-v-4221f031="" id="head" style="width: 60%">-->
			<!--<div class="head_content"><h3 class="product-name"><span>{$Think.lang.bind_mailbox}</span><em></em></h3>-->
				<!--<div class="left" onclick="window.history.back()"><a class="arrow_left"></a></div>-->
				<!--<div class="right arrow_right"><b></b></div>-->
			<!--</div>-->
		<!--</div>-->
        <!--引入导航条-->
        <include file="Base:footer" />
		<section data-v-4221f031="" class="page-main">
          <h3>
            <span>{$Think.lang.bind_mailbox}</span>
            <a href="javascript: void (0);" onclick="window.location.href = '{:U(\'User/index\')}'">{$Think.lang.back}</a>
          </h3>
			<div data-v-4221f031="" class="form">

				<div data-v-4221f031="" class="form-item1">
					<input data-v-4221f031="" type="email" id="email"  placeholder="{$Think.lang.input_new_email}" style="width: 100%">
				</div>

				<div data-v-4221f031="" class="form-item2">
					<label data-v-4221f031="">
						<input data-v-4221f031="" type="tel" maxlength="6" placeholder="{$Think.lang.input_code}" id="smscode">
						<p data-v-4221f031="" class="btnYzm yzmColor">{$Think.lang.get_code}</p>
					</label>
				</div>

			</div>
            <div data-v-4221f031="" class="exitOut" onclick="submit();" >{$Think.lang.submit}</div>
		</section>
		<include file="Base:trueFooter" />
	</div>
</div>
<script src="__PUBLIC__/Qts/Home/js/jquery.js"></script>
<script type="text/javascript" src="__PUBLIC__/Home/css/layer/layer.js"></script>
<script>
    $('.btnYzm').bind('click',getCode)
    function getCode(){
        var  email = $('#email').val();
        get_email_code(email);
    }

    function get_email_code(email) {

        var index = layer.load(2);

        $.ajax({
            url:"{:U('Tools/outpwd_emailverify')}",
            dataType: 'json',
            type: 'get',
            data: {'email':email},
            success:function(data){

                layer.close(index);

                if(data.ret_code == 200){
                    layer.msg(data.ret_msg);
                    return mbtime();
                } else{
                    return layer.msg(data.ret_msg);
                }
            }
        });
    }



    function mbtime()
    {
        var s=60;
        var timer=setInterval(function () {
            s--;
            $('.btnYzm').html(s+'s').removeClass('yzmColor');
            $('.btnYzm').unbind('click');
            if(s==0){
                $('.btnYzm').html('{$Think.lang.get_code}').addClass('yzmColor');
                $('.btnYzm').bind('click',getCode)
                clearInterval(timer)
                timer=null;
            }
        },1000)
    }


    function submit()
    {
        var index   = layer.load(2);

        var email       = $('#email').val();
        var smscode     = $('#smscode').val();

        $.ajax({
            url:"{:U('BindEmail')}",
            dataType: 'json',
            type: 'post',
            data: {'email':email,'smscode':smscode},
            success:function(data){

                if(data.code == 200){

                    layer.close(index);
                    return window.location.href="{:U('index')}";
                } else{
                    layer.close(index);
                    return layer.msg(data.msg);
                }
            }
        });
    }

</script>
</body>
</html>