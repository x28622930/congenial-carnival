    <include file="Base:header" />
    <title data-n-head="true">注册</title>

    <link href="__PUBLIC__/Qts/Home/css/common.css" rel="stylesheet">

    <style type="text/css">#set-psw {
        position: fixed;
        height: 100%;
        width: 100%;
        background: rgba(0, 0, 0, .5);
        z-index: 999;
        top: 0;
        left: 0
    }

    #set-psw .qts-img {
        width: 75%;
        background: #fff;
        border-radius: 4px;
        position: absolute;
        top: 50%;
        left: 50%;
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
        -webkit-transform: translate(-50%, -50%)
    }

    #set-psw .qts-ipt {
        display: block;
        border-bottom: .01rem solid #e2e5e8;
        width: 100%;
        line-height: .4rem;
        margin: 0 auto
    }

    #set-psw .qts-name {
        text-align: center;
        margin-top: .2rem;
        padding: 0 .1rem .1rem;
        margin-bottom: 0;
        font-size: .17rem;
        font-weight: 700;
        color: #222
    }

    #set-psw .qts-rule {
        text-align: left;
        font-size: .14rem
    }

    #set-psw .qts-content {
        padding: 0 .2rem;
        min-height: .36rem;
        position: relative;
        font-size: .16rem;
        color: #999;
        margin: 0;
        text-align: center;
        line-height: .3rem
    }

    #set-psw .qts-content .txt_black {
        color: #222;
        font-size: .16rem;
        width: .6rem
    }

    #set-psw .btns a {
        display: block;
        margin-top: .18rem;
        border-top: .01rem solid #ddd;
        line-height: .44rem;
        text-align: center;
        font-size: .17rem;
        color: #2187f7
    }

    #set-psw .btn-cancel {
        position: absolute;
        width: .25rem;
        height: .25rem;
        top: .05rem;
        right: .05rem
    }

    .login_content[data-v-221d2783] {
        padding: 0 .2rem
    }

    h2[data-v-221d2783] {
        font-size: 30px;
        color: #333;
        line-height: .6rem;
        margin-bottom: .2rem
    }

    .captcha[data-v-221d2783] {
        width: .89rem;
        height: .28rem;
        color: #ddd;
        position: absolute;
        right: .01rem;
        top: .12rem;
        text-align: center;
        line-height: .28rem;
        border-radius: .01rem
    }

    .capa[data-v-221d2783] {
        color: #2187f7
    }

    label[data-v-221d2783] {
        position: relative;
        display: block
    }

    .login_form[data-v-221d2783] {
        margin: 0 auto;
        text-align: center
    }

    input[data-v-221d2783] {
        width: 100%;
        height: .48rem;
        margin-top: .04rem;
        background-color: #fff;
        border-bottom: .01rem solid #ddd
    }

    .login_btn[data-v-221d2783] {
        position: relative;
        margin-top: .32rem
    }

    .login_btn .activeColor[data-v-221d2783] {
        background-image: -o-linear-gradient(319deg, #1254a8 0, #0c62c1 100%);
        background-image: linear-gradient(-229deg, #1254a8, #0c62c1)
    }

    span[data-v-221d2783] {
        position: relative;
        display: block;
        margin: 0 .03rem 0 .04rem;
        text-align: center;
        line-height: .44rem;
        background-color: #cecfd1;
        border-radius: .44rem;
        font-size: .17rem;
        color: #fff;
        letter-spacing: 0
    }

    .login_content[data-v-91426cd2] {
        padding: 0 .2rem
    }

    h2[data-v-91426cd2] {
        font-size: 30px;
        color: #999;
        line-height: .6rem;
        margin-bottom: .2rem
    }

    .captcha[data-v-91426cd2] {
        width: .89rem;
        height: .28rem;
        color: #ddd;
        position: absolute;
        right: .01rem;
        top: .12rem;
        text-align: center;
        line-height: .28rem;
        border-radius: .01rem
    }

    .capa[data-v-91426cd2] {
        color: #2187f7
    }

    label[data-v-91426cd2] {
        position: relative;
        display: block
    }

    .login_form[data-v-91426cd2] {
        margin: 0 auto;
        text-align: center
    }

    input[data-v-91426cd2] {
        width: 100%;
        height: .48rem;
        margin-top: .04rem;
        /*background-color: #fff;*/
        border-bottom: .01rem solid #444;
        color: #999;
    }

    .login_btn[data-v-91426cd2] {
        position: relative;
        margin-top: .32rem
    }

    .login_btn .activeColor[data-v-91426cd2] {
        /*background-image: -o-linear-gradient(319deg, #1254a8 0, #0c62c1 100%);*/
        /*background-image: linear-gradient(-229deg, #1254a8, #0c62c1)*/
        background: #ffbf23;
    }

    span[data-v-91426cd2] {
        position: relative;
        display: block;
        margin: 0 .03rem 0 .04rem;
        text-align: center;
        line-height: .4rem;
        background-color: #cecfd1;
        border-radius: .05rem;
        font-size: .16rem;
        color: #000;
        letter-spacing: 0
    }

    p[data-v-91426cd2] {
        font-size: 12px;
        color: #999;
        text-align: center;
        margin-top: .1rem
    }

    .cap[data-v-91426cd2] {
        color: #ffbf23;
    }

    img[data-v-2e91bfd5] {
        width: 100%;
        height: 100%
    }

    .page-main[data-v-2e91bfd5] {
        padding: .5rem .1rem 0;
        background: #f5f5f5
    }
    #header h3[data-v-7fd5ad9d] {
        position: relative;
        height: .5rem;
        line-height: .5rem;
        margin: 0;
        font-size: .16rem;
        font-weight: 400;
        overflow: hidden;
    }
    #header .header_content .left a[data-v-7fd5ad9d] {
        color: #fff;
        line-height: .5rem;
        font-size: .2rem;
    }
    #header .header_content .left[data-v-7fd5ad9d] {
        position: absolute;
        top: 0;
        left: .2rem;
    }
    .arrow_left[data-v-7fd5ad9d]:after {
        border-color: #ffbf23;
    }
    .arrow_left[data-v-7fd5ad9d]:after, .arrow_white[data-v-7fd5ad9d]:after {
        content: " ";
        display: inline-block;
        -webkit-transform: rotate(225deg);
        -ms-transform: rotate(225deg);
        transform: rotate(225deg);
        height: .17rem;
        width: .17rem;
        border-width: .02rem .02rem 0 0;
        border-style: solid;
        top: -.02rem;
        position: absolute;
        left: 0;
        top: .19rem;
    }
    </style>
</head>
<body>
<div id="__nuxt">
    <div class="progress" data-v-4a8a9a01=""
         style="width: 0%; height: 2px; background-color: rgb(1, 40, 97); opacity: 0;"></div>
    <div data-v-91426cd2="" class="">
        <div id="header" data-v-7fd5ad9d="" data-v-221d2783="">
            <div class="header_content" data-v-7fd5ad9d=""><h3 data-v-7fd5ad9d=""></h3>
                <div class="left" data-v-7fd5ad9d="" onclick="window.history.back();"><a class="arrow_left" data-v-7fd5ad9d=""></a></div><!----></div>
        </div>
        <div data-v-91426cd2="" class="login_content"><h2 data-v-91426cd2="">快速注册</h2>
            <div data-v-91426cd2="" class="login_form">
                <div data-v-91426cd2="" class="ipt-group">
                    <label data-v-91426cd2="">
                        <input class="phone" data-v-91426cd2="" type="tel" placeholder="请输入手机号" maxlength="11">
                        <i data-v-91426cd2="" class="icon icon_tel" style="display: none;"></i>
                    </label>
                </div>

                <div data-v-91426cd2="" class="ipt-group">
                    <label data-v-91426cd2="">
                        <input class="qrcode" data-v-91426cd2="" type="tel" placeholder="验证码" maxlength="6" id="smscode">
                        <i data-v-91426cd2="" class="captcha getqrcode">获取验证码</i>
                    </label>
                </div>

                <div data-v-91426cd2="" class="ipt-group">
                    <label data-v-91426cd2="">
                        <input class="password" data-v-91426cd2="" type="password" placeholder="登录密码" id="password">
                    </label>
                </div>
            </div>
            <div data-v-91426cd2="" class="ipt-group">
                <label data-v-91426cd2="">
                    <input data-v-91426cd2="" type="text" placeholder="推广码" maxlength="30" id="code" value="{$code}">
                    <i data-v-91426cd2="" class="captcha">选填</i>
                </label>
            </div>
            <div data-v-91426cd2="" class="login_btn"><span data-v-91426cd2="" class="activeColor" onclick="submit();">提交</span></div>
            <p data-v-91426cd2="">注册即表示同意<a href="{:U('regAgreement')}"><em data-v-91426cd2="" class="cap">《用户协议》</em></a></p>
            </div>
    </div>
</div>
<script src="__PUBLIC__/Qts/Home/js/jquery.js"></script>
<script type="text/javascript" src="__PUBLIC__/Home/css/layer/layer.js"></script>
<script type="text/javascript" src="__PUBLIC__/Qts/Home/js/appAlert.js"></script>
<!-- 15731939731 139862 -->
<script> 

    $('.phone').keyup(function () {
        if ($(this).val().length == 11) {
            $('.getqrcode').addClass('cap');
        } else {
            $('.getqrcode').removeClass('cap');
        }
    });


    //验证码
    $('label').on('click','.cap',getCode)
    function getCode(){

        var  mobile = $('.phone').val();
        get_phones_code(mobile);
    }

    function get_phones_code(mobile){

        try{
            showProgress();
        }catch(e){
            var index = layer.load(2);
        }

        $.ajax({
            url:"{:U('Tools/smsverify')}",
            dataType: 'json',
            type: 'get',
            data: {'mobile':mobile},
            success:function(data){

                try{
                    closeProgress();
                }catch(e){
                    layer.close(index);
                }
                if(data.ret_code == 200){

                    try{
                        alertMessage(data.ret_msg,1000);
                    }catch(e){
                        layer.msg(data.ret_msg);
                    }
                    return mbtime();
                } else{
                    try{
                        return alertMessage(data.ret_msg,1000);
                    }catch(e){
                        return layer.msg(data.ret_msg);
                    }
                }
            }
        });
    }

    function mbtime()
    {
        var s=60;
        var timer=setInterval(function () {
            s--;
            $('.getqrcode').html(s+'秒').removeClass('cap');
            $('.getqrcode').unbind('click');
            if(s==0){
                $('.getqrcode').html('获取验证码').addClass('cap');
                $('.getqrcode').bind('click',getCode);
                clearInterval(timer);
                timer=null;
            }
        },1000);
    }


    //注册信息提交
    function submit()
    {
        try{
            showProgress();
        }catch(e){
            var index = layer.load(2);
        }

        var mobile      = $('.phone').val();
        var password    = $('#password').val();
        var smscode     = $('#smscode').val();
        var code        = $('#code').val();

        $.ajax({
            url:"{:U('Register/register')}",
            dataType: 'json',
            type: 'post',
            data: {'mobile':mobile,'password':password,'smscode':smscode,'code':code},
            success:function(data){

                try{
                    closeProgress();
                }catch(e){
                    layer.close(index);
                }

                if(data.code == 200){
                    try{
                        alertMessage(data.msg,1000);
                    }catch(e){
                        layer.msg(data.msg);
                    }
                    return setTimeout(" window.location.href='{:U('Login/login')}'",500);
                } else{
                    try{
                        return alertMessage(data.msg,1000);
                    }catch(e){
                        return layer.msg(data.msg);
                    }
                }
            }
        });
    }

</script>
</body>
</html>