    <include file="Base:header" />
    <title data-n-head="true">{$Think.lang.position_detail}</title>
    <link href="__PUBLIC__/Qts/Home/css/common.css" rel="stylesheet">
    <style data-vue-ssr-id="2171aacc:0 f6ab7448:0 4134c036:0">
        .zixuan li[data-v-63966bdb] {
            -webkit-box-flex: 1;
            -ms-flex: 1;
            flex: 1;
            -webkit-flex: 1;
            padding: .09rem .1rem;
            color: #fff;
            border-radius: .04rem;
            margin-right: .1rem;
            text-align: center;
            overflow: hidden;
            background: #fff;
            -webkit-box-shadow: 0 2px 4px 0 rgba(0, 0, 0, .1);
            box-shadow: 0 2px 4px 0 rgba(0, 0, 0, .1)
        }

        .zixuan li[data-v-63966bdb]:last-child {
            margin-right: 0
        }

        .content-tip li[data-v-63966bdb] {
            -webkit-box-flex: 1;
            -ms-flex: 1;
            flex: 1;
            -webkit-flex: 1;
            height: 1.1rem;
            width: 100%;
            text-align: center
        }

        .content-tip li img[data-v-63966bdb] {
            width: .55rem;
            height: .55rem;
            display: inline-block
        }

        .link-right p[data-v-63966bdb] {
            width: 80%;
            white-space: nowrap;
            overflow: hidden;
            -o-text-overflow: ellipsis;
            text-overflow: ellipsis;
            padding-right: .1rem
        }

        .dashi ul[data-v-63966bdb] {
            height: .36rem;
            padding-left: 30%;
            position: relative
        }

        .dashi li[data-v-63966bdb] {
            height: .38rem;
            line-height: .38rem
        }

        .hot-wrap img[data-v-63966bdb] {
            width: .6rem
        }

        .earnings-list-con li[data-v-63966bdb] {
            height: .5rem;
            float: left;
            margin-top: .14rem;
            min-width: 60px;
            -webkit-box-flex: 1;
            -ms-flex: 1;
            flex: 1
        }

        .textNone_content div[data-v-ea184226] {
            width: 1.5rem;
            height: 1.23rem;
            margin: 0 auto
        }

        .textNone_content p[data-v-ea184226] {
            width: 100%;
            text-align: center;
            color: #b3b3b3;
            font-size: .15rem;
            line-height: .4rem
        }

        a[data-v-18c6d448] {
            display: block;
            width: .24rem;
            height: .23rem;
            background-size: 100%;
            margin: .06rem auto
        }

        .history span[data-v-7ecec926] {
            display: block;
            width: .8rem;
            height: .2rem;
            line-height: .2rem;
            text-align: center;
            font-size: .14rem;
            border-radius: .1rem 0 0 .1rem;
            margin-top: .1rem;
            margin-right: -.01rem
        }

        .titles > div[data-v-7ecec926] {
            width: 25%;
            float: left;
            text-align: center;
            line-height: .36rem
        }

        .titles > div.on[data-v-7ecec926] {
            color: #2187f7;
            position: relative
        }

        .titles > div[data-v-7ecec926]:last-child {
            -webkit-box-shadow: none;
            box-shadow: none
        }

        .titles > div.on span[data-v-7ecec926] {
            display: inline-block;
            width: 30%;
            height: .02rem;
            background: #2187f7;
            position: absolute;
            bottom: 0;
            left: 50%;
            margin-left: -15%;
            border-radius: .2rem
        }

        .titles > div.on[data-v-145cf773] {
            color: #2187f7;
            position: relative
        }

        .titles > div[data-v-145cf773]:last-child {
            -webkit-box-shadow: none;
            box-shadow: none
        }

        .titles > div.on span[data-v-145cf773] {
            display: inline-block;
            width: 30%;
            height: .02rem;
            background: #2187f7;
            position: absolute;
            bottom: 0;
            left: 50%;
            margin-left: -15%;
            border-radius: .2rem
        }

        .head_tab li[data-v-6524b236] {
            -webkit-box-flex: 1;
            -ms-flex: 1;
            flex: 1;
            height: .3rem;
            line-height: .3rem;
            border-radius: .4rem
        }

        .touch-border[data-v-6524b236] {
            height: 20px;
            width: 100%;
            border-radius: .1rem .1rem 0 0;
            background: #fff;
            position: fixed;
            z-index: 99;
            margin-top: .14rem
        }

        .con-btn b[data-v-6524b236] {
            font-size: .13rem;
            font-weight: 400
        }

        .trade-con p[data-v-6524b236] {
            width: 75%;
            text-align: center;
            font-size: .12rem;
            line-height: .16rem;
            margin-top: .07rem;
            color: #999
        }

        .quick-btn em[data-v-6524b236] {
            font-size: .16rem
        }

        .con-btn em[data-v-6524b236] {
            font-size: .14rem;
            line-height: .16rem;
            margin-top: .02rem
        }

        .putType-wrap li[data-v-6524b236] {
            -webkit-box-flex: 1;
            -ms-flex: 1;
            flex: 1;
            text-align: center;
            border: 1px solid #c8c8c8;
            border-radius: .02rem;
            font-size: .14rem;
            color: #666;
            height: .24rem;
            line-height: .22rem
        }

        .stock-wrap {
            background: #171520
        }

        .stock-price, .stock-title {
            width: 100%;
            height: .34rem;
            position: absolute;
            z-index: 99
        }

        .stock-title {
            width: 100%;
            height: .3rem;
            position: relative;
            z-index: 999;
            background: #171520;
            border-radius: .1rem .1rem 0 0
        }

        .nav-wrap {
            margin: 0 .15rem;
            overflow-x: auto;
            height: .3rem
        }

        .nav-img {
            position: absolute;
            width: .1rem;
            right: .15rem;
            height: .24rem
        }

        .stock-price {
            overflow: hidden;
            width: 100%;
            position: relative;
            z-index: 999;
            display: none
        }

        .stock-title {
            overflow-x: scroll
        }

        #priceMsg {
            left: 0
        }

        #priceMsg p {
            display: block;
            width: 100%;
            height: .24rem;
            padding-left: .14rem;
            overflow: hidden
        }

        #priceMsg p, ul.stock-tab {
            background: #999;
            line-height: .24rem
        }

        ul.stock-tab {
            height: .25rem;
            color: #999;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            border-radius: .4rem 0 0 .4rem;
            width:4.1rem;
        }

        .stock-tab li {
            width: .5rem;
            height: .24rem;
            float: left;
            margin-left: .1rem;
            color: #333;
            text-align: center
        }

        .stock-tab li:first-child {
            margin-left: 0
        }

        .stock-tab li.has {
            color: #ffbf23;
            border: 1px solid #ffbf23;
            border-radius: .2rem
        }

        #priceMsg span {
            padding: 0 .03rem;
            font-size: .1rem;
            color: #222
        }

        .mod-kline text, .mod-lightning text, .mod-sline text {
            font: 12px Arial;
            text-anchor: start;
            -webkit-tap-highlight-color: transparent
        }

        article {
            -webkit-user-select: none;
            -moz-user-select: none;
            position: relative
        }

        .article {
            top: .36rem
        }

        .ma {
            font-size: .1rem;
            color: #333;
            margin: 0 .15rem
        }

        .ma span {
            padding-left: .22rem;
            margin-right: .1rem
        }

        span.ma5 {
            background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAKCAYAAADRuIyZAAAAAXNSR0IArs4c6QAAAMhJREFUOBG1VLsOwjAMPPeHurBSmJHgb1iQYEIs/A0IZh4rC3xQzbmqIrUKVRxRT4l9vpwucQSZ8Z7pFIq1ABOjUOAFwbG8yzOHkjz+oIiN1Njz8E4/N7UW2FLMwcvaIUppNico4kYRRQzfipl7nYmSxQ4IOV7HLxGGaWrEBHziQj6VXlSxSMSPAhPB1e/IKFKg/jdS6Yn+Lwf1CM7lQ1aDmF7R7whH1B5kjydsmxoxIZG4cAuxaaCPu5gYy7Xj6/5L2JsX//7Qvn1lPzRdJgJuAAAAAElFTkSuQmCC) no-repeat 0;
            background-size: 20%
        }

        span.ma10 {
            background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAKCAYAAADRuIyZAAAAAXNSR0IArs4c6QAAAMNJREFUOBFjZCATpMz/bwvUWgrEJlAjzgDp7jmJjIehfJIoRpJUQxUDHVH1n4GhheE/A4p+IOcfUKQW6Jg2Us1FMYgYzeCQ+M9wAOgQJmzqoY5xIDVksBqGzQIksVJcjgCpgcqBoowkwAj04db//xm8SNJFZcWMjAzbyAkRKjsDHIr/yUkjm4Ah6IvPNUAfbgamET98atDlyAmRbnCCRDcJyofKdeOQxilMskPAuYGJoQ6bY8BikOxLclkC1EseoHaBBgC7gzdCKck6xgAAAABJRU5ErkJggg==) no-repeat 0;
            background-size: 20%
        }

        span.ma20 {
            background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAKCAYAAADRuIyZAAAAAXNSR0IArs4c6QAAANpJREFUOBFjZCATvHvkb8vw51/pf0YGE5ARjP8ZzjCwMHULyW08TI6RjORoevfAt4rh//+W//8ZUPQzMjL+A4rUCilsbiPVXBSDiNEMDom//w78//+fCZt6sGOYmRxIDRmshmGzAC4Gig4cjgCpAcsB1cDVE8lgfHffZyswiL2IVE8TZYyMDNtIDxFaOOU/IzDNkwje3fPd9J/hvy8+bYwMjJuFlDb74VODLkd6iACzKDhBopsE5YPlgGpwSOMUJtkh4NzAyFCHzTFgMVD2JaMsITlqYF6idoEGAG3STCOh+37pAAAAAElFTkSuQmCC) no-repeat 0;
            background-size: 20%
        }

        .product-name {
            position: relative
        }

        #head2 h3 span:first-of-type {
            display: block;
            font-size: .16rem
        }

        .product-name em {
            position: absolute;
            top: .18rem;
            font-size: .12rem;
            left: 50%;
            margin-left: -.32rem
        }

        .detail[data-v-3313d0ea] {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            width: 100%
        }

        .kline-main[data-v-3313d0ea] {
            padding-top: .6rem;
            z-index: 100
        }

        .kline-main article[data-v-3313d0ea] {
            top: .1rem
        }

        .detail-title[data-v-3313d0ea] {
            background: #171520;
            padding: 0 .15rem .05rem
        }
        .variety-name {
            color: #999999 !important;
        }
        .article[data-v-3313d0ea] {
            top: .1rem
        }

        .variety-title[data-v-3313d0ea] {
            height: .4rem;
            line-height: .3rem;
            padding-top: .1rem;
        }

        .detail-title .buy-tag[data-v-3313d0ea] {
            border-radius: .1rem;
            font-size: .1rem
        }

        .detail-title .win[data-v-3313d0ea] {
            font-size: .16rem
        }

        .detail-wrap[data-v-3313d0ea] {
            position: relative
        }

        .detail-wrap ul[data-v-3313d0ea] {
            background: #171520;
            padding: 0 .15rem
        }

        .detail-list[data-v-3313d0ea] {
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            display: -webkit-flex;
            height: .49rem;
            line-height: .5rem
        }

        .eee[data-v-3313d0ea] {
            /*background: #eee;*/
            background: #1c1a25
        }

        .f5[data-v-3313d0ea] {
            /*background: #f5f5f5;*/
            background: #1c1a15
        }

        .list-txt[data-v-3313d0ea] {
            -webkit-box-flex: 1;
            -ms-flex: 1;
            flex: 1;
            -webkit-flex: 1;
            padding-left: .3rem;
            color: #999
        }

        .list-num[data-v-3313d0ea] {
            margin-right: .2rem;
            text-align: left;
            color: #999;
            display: inline-block;
            width: 38%
        }

        .detail-btn[data-v-3313d0ea] {
            width: 100%;
            height: .55rem;
            position: fixed;
            bottom: 0;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            display: -webkit-flex;
            /*background: hsla(0, 0%, 100%, .8);*/
            background: #171520;
        }

        .detail-btn a[data-v-3313d0ea] {
            -webkit-box-flex: 2;
            -ms-flex: 2;
            flex: 2;
            -webkit-flex: 2;
            height: .4rem;
            line-height: .4rem;
            text-align: center;
            color: #000;
            font-size: .16rem;
            margin: 0 .1rem;
            border-radius: .05rem;
            background: #fff;
            border: .01rem solid #ffbf23;
        }

        .detail-btn a.flex[data-v-3313d0ea] {
            -webkit-box-flex: 3;
            -ms-flex: 3;
            flex: 3;
            -webkit-flex: 3
        }

        .detail-btn a.bor_blue[data-v-3313d0ea] {
            color: #ffbf23;
            background: #1c1a25;
        }

        .detail-btn a.bg_blue[data-v-3313d0ea] {
            /*background: -o-linear-gradient(319deg, #1254a8 0, #0c62c1 100%);*/
            /*background: linear-gradient(-229deg, #1254a8, #0c62c1)*/
            background: #ffbf23;
        }

        .line[data-v-3313d0ea] {
            width: 100%;
            background: #fff
        }

        .line img[data-v-3313d0ea] {
            display: block;
            width: 100%
        }

        .stock-wrap[data-v-3313d0ea] {
            top: 0
        }

        .order-info[data-v-3313d0ea] {
            background: #171520;
            padding: 0.1rem .15rem;
            margin-bottom: .3rem;
        }

        .order-info p[data-v-3313d0ea] {
            line-height: .25rem;
            color: #999;
            font-size: .1rem
        }

        .winloss a[data-v-3313d0ea] {
            float: right;
            color: #ffbf23;
            text-decoration: underline
        }

        .dealer[data-v-3313d0ea] {
            color: #666;
            height: .2rem
        }

        .con-wrap[data-v-3313d0ea] {
            width: 100%;
            position: absolute;
            left: 0;
            overflow-y: scroll;
        }

        .con-main[data-v-3313d0ea] {
            width: 100%;
            height: 100%;
            overflow-y: scroll;
            padding-bottom: .55rem;
            -webkit-overflow-scrolling: touch
        }

        .stock-title {
            width: 100%;
            height: .34rem;
            overflow-x: scroll
        }

        #priceMsg {
            width: 5.5rem;
            height: .24rem;
            line-height: .34rem;
            background: #f9f9f9;
            color: #999;
            border-top: .01rem solid #ddd;
            border-bottom: .01rem solid #ddd;
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        .stock-tab li {
            width: .5rem;
            padding: 0 .05rem;
            float: left;
            margin-left: .1rem
        }

        #priceMsg span {
            padding: 0 .03rem;
            font-size: .1rem;
            color: #222
        }

        .stock-line {
            height: 3rem;
            width: 100%;
            vertical-align: middle;
            background: #f2f2f2
        }

        .mod-kline, .mod-sline {
            height: 3rem;
            width: 100%;
            -webkit-tap-highlight-color: transparent
        }

        .mod-kline text, .mod-lightning text, .mod-sline text {
            font: 12px Arial;
            text-anchor: start;
            -webkit-tap-highlight-color: transparent
        }

        .popup-img {
            padding-top: .1rem;
            background: #171520 !important;
        }

        .popup-title {
            font-size: .2rem;
            /*color: #ffffff;*/
            padding: .15rem;
        }

        .popup-img .btns {
            width: 100%;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            display: -webkit-flex;
            margin-top: .2rem;
        }

        .popup-title .buy-tag {
            border-radius: .1rem;
            font-size: .12rem;
            margin: 0 .03rem;
        }

        .popup-title em {
            color: #b2b2b2;
            font-size: .14rem;
            padding-left: .02rem;
        }

        .popup, .popup ul {
            width: 100%;
        }

        .popup ul li {
            width: 100%;
            height: .3rem;
            line-height: .3rem;
            clear: both;
        }

        .popup-content p {
            width: 85%;
            text-align: center;
            font-size: .12rem;
            color: #999;
            line-height: .16rem;
            margin-top: .02rem;
        }

        .list .con-txt {
            height: .2rem;
            line-height: .2rem;
        }

        .popup-img .btns a {
            -webkit-box-flex: 1;
            -ms-flex: 1;
            flex: 1;
            -webkit-flex: 1;
            height: .44rem;
            display: block;
            text-align: center;
            line-height: .44rem;
            font-size: .17rem;
        }

        .btn-ok {
            border-top: .01rem solid #ffbf23;
            color: #000;
            background: #ffbf23;
        }

        .btn-cancel {
            border-top: .01rem solid #ffbf23;
            color: #ffbf23;
        }

        .btn-cancel {
            border-top: .01rem solid #ffbf23;
            color: #ffbf23;
        }

        .popup-window {
            display: none;
        }

        .article {
            height: 350px;
        }
        .qts-window {
            position: fixed;
            height: 100%;
            width: 100%;
            background: rgba(0,0,0,.5);
            z-index: 999;
            top: 0;
            left: 0;
        }
        .qts-img {
            width: 75%;
            background: #1F222B;
            border-radius: 4px;
            position: absolute;
            top: 50%;
            left: 50%;
            -ms-transform: translate(-50%,-50%);
            transform: translate(-50%,-50%);
            -webkit-transform: translate(-50%,-50%);
            padding-top: .3rem;
        }
        .qts-name {
            text-align: center;
            margin-top: .1rem;
            padding: 0 .1rem .1rem;
            margin-bottom: 0;
            font-size: .2rem;
            font-weight: 700;
            color: #999999;
        }

        .qts-content, .qts-order {
            line-height: .3rem;
            text-align: center;
        }
        .qts-order {
            font-size: .14rem;
            color: #b2b2b2;
        }
        .qts-content {
            padding: 10px 20px 15px;
            min-height: 36px;
            position: relative;
            font-size: .16rem;
            color: #999;
            margin: 0;
            margin-top: .15rem;
        }
        .qts-window .btns {
            width: 100%;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            display: -webkit-flex;
            margin-top: .2rem;
        }
        .qts-content li {
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
        }
        .qts-content li span:first-child {
            display: inline-block;
            text-align: right;
            color: #999;
            font-size: .16rem;
            margin-right: .05rem;
            min-width: 1rem;
        }
        .qts-content .txt_black {
            color: #999999;
            font-size: .16rem;
            width: .6rem;
        }
        .qts-content li span {
            -webkit-box-flex: 1;
            -ms-flex: 1;
            flex: 1;
        }
        .txt_black {
            color: #727272;
        }
        .txt_red {
            color: #f64e43;
        }
        .qts-content li span:last-child {
            display: inline-block;
            text-align: left;
            margin-left: .1rem;
        }
        .qts-window .btns a {
            -webkit-box-flex: 1;
            -ms-flex: 1;
            flex: 1;
            -webkit-flex: 1;
            height: .44rem;
            display: block;
            text-align: center;
            line-height: .44rem;
            font-size: .17rem;
        }
        .btn-cancel {
            border-top: .01rem solid #ffbf23;
            color: #ffbf23;
        }
        .box{
            display: none;
        }
    </style>
</head>
<body class="">
<div id="__nuxt">
    <div class="progress" data-v-4a8a9a01=""
         style="width: 0%; height: 2px; background-color: rgb(1, 40, 97); opacity: 0;"></div>
    <div data-v-3313d0ea="" class="detail">
        <div data-v-3313d0ea="" id="head">
            <div class="head_content"><h3 class="product-name"><span>{$Think.lang.position_detail}</span><em></em></h3>
                <div class="left"><a class="arrow_left" onclick="window.location.href='{:U('trade')}'"></a></div>
                <div class="right arrow_right"><b></b></div>
            </div>
        </div>
        <div data-v-3313d0ea="" class="kline-main">
            <div data-v-3313d0ea="" class="stock-wrap">
                <div class="touch-border"></div>
                <div id="stock-title" class="stock-title">
                    <div class="nav-wrap"><img
                            src="__PUBLIC__/Qts/Home/img/chicang/img2.png"
                            class="nav-img">
                        <ul id="stock" class="stock-tab clearfix" style="width: 4.7rem">
                            <li data="fenshi" class="nav-list has">Time</li>
                            <li data="1m" class="nav-list">1M</li>
                            <li data="5m" class="nav-list">5M</li>
                            <li data="15m" class="nav-list">15M</li>
                            <li data="30m" class="nav-list">30M</li>
                            <li data="1h" class="nav-list">1H</li>
                            <li data="4h" class="nav-list">4H</li>
                            <li data="1d" class="nav-list">1D</li>
                        </ul>
                    </div>
                </div>

                <article class="article" style="top: 0px;">
                    <iframe id="nowtu" name='nowtu' style='width:100%;height:100%;border: 0;'
                            src="{:U('Product/highcharts',array('code' => $option['capital_key'],'interval' => 'fenshi','type' => 'candlestick','height' =>350,'length' => $info['capital_length']))}"></iframe>
                </article>
            </div>
            <!--<div data-v-3313d0ea="" class="line">-->
                <!--<img data-v-3313d0ea="" src="__PUBLIC__/Qts/Home/img/chicang/img3.png">-->
            <!--</div>-->
        </div>
        <div data-v-3313d0ea="" class="con-wrap">
            <section data-v-3313d0ea="" class="con-main">
                <div data-v-3313d0ea="" class="detail-wrap">
                    <div data-v-3313d0ea="" class="detail-title">
                        <p data-v-3313d0ea="" class="variety-title">
                            <span data-v-3313d0ea="" class="variety-name">{$order.option_name}</span>
                            <span data-v-3313d0ea="" class="buy-tag {$order.ostyleColor}" style="padding: .02rem .04rem">{$order.ostyleMsg}</span>
                            <span data-v-3313d0ea="" class="right win txt_green ploss">${$order.ploss}</span>
                        </p>
                        
                        <if condition="$order['order_scene'] eq 1">
                            <p data-v-3313d0ea="" class="dealer">
                            <span data-v-3313d0ea="" class="winloss">
                                <a data-v-3313d0ea="" href="javascript:;" class="bor_blue">
                                    {$Think.lang.setting_stop_loss}
                                </a>
                            </span>
                            </p>
                        </if>
                        
                    </div>

                    <ul data-v-3313d0ea="">
                        
                        <li data-v-3313d0ea="" class="detail-list">
                            <if condition="$order['order_scene'] eq 1">
                            <div data-v-3313d0ea="" class="list-txt eee">{$Think.lang.stop_loss}
                                <em data-v-3313d0ea="" class="list-num right">{$order.endloss}</em>
                            </div>
                            <else />
                                <div data-v-3313d0ea="" class="list-txt eee">{$Think.lang.remaining_time}
                                    <em data-v-3313d0ea="" class="list-num right remaining_time">{$order.remaining_time}秒</em>
                                </div>
                            </if>
                            <div data-v-3313d0ea="" class="list-txt f5">{$Think.lang.current_price}
                                <em data-v-3313d0ea="" class="list-num right newPrice">{$order.sellprice}</em>
                            </div>
                        </li>

                        <li data-v-3313d0ea="" class="detail-list">
                            <if condition="$order['order_scene'] eq 1">
                                <div data-v-3313d0ea="" class="list-txt f5">{$Think.lang.target_profit}
                                    <em data-v-3313d0ea="" class="list-num right">{$order.endprofit}</em>
                                </div>
                            <else />
                                <div data-v-3313d0ea="" class="list-txt f5">{$Think.lang.hold_time}
                                    <em data-v-3313d0ea="" class="list-num right">{$order.second}s</em>
                                </div>
                            </if>
                            <div data-v-3313d0ea="" class="list-txt eee">{$Think.lang.opening_price}
                                <em data-v-3313d0ea="" class="list-num right openPrice">{$order.buyprice}</em>
                            </div>
                        </li>

                        <li data-v-3313d0ea="" class="detail-list">
                            <if condition="$order['order_scene'] eq 1">
                                <div data-v-3313d0ea="" class="list-txt eee">{$Think.lang.trade_lots}
                                    <em data-v-3313d0ea="" class="list-num right">{$order.onumber}</em>
                                </div>
                                <div data-v-3313d0ea="" class="list-txt f5">{$Think.lang.bond}
                                    <em data-v-3313d0ea="" class="list-num right">${$order.Bond}</em>
                                </div>
                            <else />
                                <div data-v-3313d0ea="" class="list-txt eee">{$Think.lang.bond}
                                    <em data-v-3313d0ea="" class="list-num right">${$order.Bond}</em>
                                </div>
                                <div data-v-3313d0ea="" class="list-txt f5">{$Think.lang.fee}
                                    <em data-v-3313d0ea="" class="list-num right">${$order.fee|default='-'}</em>
                                </div>
                            </if>
                        </li>
    
                        <if condition="$order['order_scene'] eq 1">
                            <li data-v-3313d0ea="" class="detail-list">
                                <div data-v-3313d0ea="" class="list-txt f5">{$Think.lang.stock}
                                    <em data-v-3313d0ea="" class="list-num right">{$order.overnight_fee|default='-'}</em>
                                </div>
                                <div data-v-3313d0ea="" class="list-txt eee">{$Think.lang.fee}
                                    <em data-v-3313d0ea="" class="list-num right">${$order.fee|default='-'}</em>
                                </div>
                            </li>
                        </if>

                    </ul>
                </div>

                <div data-v-3313d0ea="" class="order-info">
                    <p data-v-3313d0ea="">{$Think.lang.open_time}:{:date('Y/m/d H:i:s',$order['buytime'])}</p>
                    <p data-v-3313d0ea="">{$Think.lang.orderno}:{$order.orderno}</p>
                </div>
    
                <if condition="$order['order_scene'] eq 1">
                    <div data-v-3313d0ea="" class="detail-btn">
                        <a data-v-3313d0ea="" href="javascript:;" class="bg_blue" onclick="single(this);">{$Think.lang.chasing_list}</a>
                        <a data-v-3313d0ea="" href="javascript:;" class="bg_blue flex" onclick="returnSingle();">{$Think.lang.close_orders}</a>
                        <a data-v-3313d0ea="" href="javascript:;" class="bor_blue">{$Think.lang.close_position}</a>
                    </div>
                </if>
                
            </section>
        </div>
        <div data-v-3313d0ea="" class="box">
            <div class="qts-window">
                <div class="qts-img">
                    <div class="qts-name">{$Think.lang.confirm_closure}?</div>
                    <p class="qts-order">{$Think.lang.orderno}：{$order.orderno}</p>
                    <div class="qts-content">
                        <ul id="cover">
                            <li><span class="txt_black">{$Think.lang.float_ploss}：</span><span class="txt_red">${$order.ploss}</span></li>
                            <li><span class="txt_black">{$Think.lang.opening_price}：</span><span class="txt_black">{$order.buyprice}</span></li>
                            <li><span class="txt_black">{$Think.lang.current_price}：</span><span class="txt_black">{$order.sellprice}</span></li>
                        </ul>
                    </div>
                    <div class="qts-footer btns"><a class="btn-cancel">{$Think.lang.cancel}</a><a class="btn-ok" onclick="cover();">{$Think.lang.determine}</a></div>
                </div>
            </div>
        </div>
        <div data-v-3313d0ea="">
            <div id="popup-box" class="popup-window">
                <div class="popup-img">
                    <div class="popup-title">{$order.option_name}<span class="buy-tag {$order.ostyleColor}" style="padding: .02rem .04rem">{$order.ostyleMsg}</span><em>x{$order.onumber} {$Think.lang.lots}</em>
                    </div>
                    <div class="popup-content">

                        <div class="popup">
                            <ul>
                                <li><span class="left">{$Think.lang.opening_price}</span><span class="right">{$order.buyprice}</span></li>
                                <li><span>{$Think.lang.current_price}</span><span class="right alertNewPrice">{$order.sellprice}</span></li>
                            </ul>
                        </div>

                        <div class="list clearfix">
                            <div>
                                <span class="con-txt">{$Think.lang.stop_loss}</span>
                                <div class="con-right right taparea">
                                    <em class="icon-min" onclick="loss(this,2,1)"></em>
                                    <input type="number" value="{$order.endloss}" class="handnum lossWinInput endloss" onchange="targetMarket(this,'EstimatePloss',2)">
                                    <em class="icon-add" onclick="loss(this,1,1)"></em>
                                </div>
                            </div>
                            <p class="right clearfix EstimatePloss">
                                {$order.lossSymbol}<em>{$order.sellprice}</em> {$Think.lang.expected_losses} <em>${$order.lossLoss}</em>
                            </p>
                        </div>

                        <div class="list clearfix">
                            <div>
                                <span class="con-txt">{$Think.lang.target_profit}</span>
                                <div class="con-right right taparea">
                                    <em class="icon-min" onclick="loss(this,2,2);"></em>
                                    <input type="number" value="{$order.endprofit}" class="handnum lossWinInput endprofit" onchange="targetMarket(this,'EstimateProfit',1)">
                                    <em class="icon-add" onclick="loss(this,1,2)"></em>
                                </div>
                            </div>
                            <p class="right clearfix EstimateProfit">
                                {$order.profitSymbol}<em>{$order.sellprice}</em> {$Think.lang.expected_profits} <em>${$order.lossLoss}</em>
                            </p>
                        </div>

                    </div>
                    <div class="btns">
                        <a class="btn-cancel">{$Think.lang.cancel}</a>
                        <a class="btn-ok" onclick="saveProfitAndLoss();">{$Think.lang.determine}</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="__PUBLIC__/Qts/Home/js/jquery.js"></script>
<script>
    
$('.detail-btn .bor_blue').click(function () {
    $('.box').show()
})
    
    $('.stock-tab li').click(function () {
        var interval = $(this).attr('data')
        var code = "{$option.capital_key}";
        var type = 'type';
        var height = 350;
        var length = "{$info.capital_length}";
        var src = '{:U("Product/highcharts")}' + "?code=" + code + "&interval=" + interval + "&type=" + type + "&height=" + height + "&length=" + length + "";
        $('#nowtu').attr('src', src)
        $('.stock-tab li').removeClass('has');
        $(this).addClass('has');
    });


    $('.winloss .bor_blue').click(function () {
        $('.popup-window').show()
    });

    $('.btn-cancel').click(function () {
        $('.popup-window').hide()
        $('.box').hide()
    });

    $('.stock-tab li').click(function () {
        $('.stock-tab li').removeClass('has');
        $(this).addClass('has');
    });

    /**
     * [loss 点击止损止盈]
     * @param  {[object]}     obj       [当前DOM对象]
     * @param  {[Number]}     type      [1加 2减]
     * @param  {[Number]}     stop_type [1止损 2止盈]
     */
    function loss(obj, type, stop_type) {
        var val = parseFloat($(obj).siblings('input').val());

        var openPrice   = $('.openPrice').html();           //开盘价
        var nowPrice    = $('.alertNewPrice').html();       //当前价格
        
        //止损价/止盈价
        var endloss     = $('.EstimatePloss > em').html();
        var endprofit   = $('.EstimateProfit > em').html();

        
        var length              = "{$info.capital_length}";
        var capital_dot_length  = "{$option.capital_dot_length}";
        var wave                = "{$option.wave}";

        var marketBond  = "{$order.Bond}";
        var ostyle      = "{$order.ostyle}"; //买入方向 0涨 1跌
        var number      = "{$order.onumber}";

        wave = wave * number;

        var point = (marketBond / wave) / capital_dot_length;

        arr = profitFormula(openPrice, endloss, endprofit, point, length, val, type, stop_type, ostyle);

        val = arr.val;

        $(obj).siblings('input').val(val.toFixed(length));

        SettingLoss();
    }

    //止损价，止盈价
    function profitFormula(openPrice, endloss, endprofit, point, length, val, type, stop_type, ostyle) {
        var numberArr   = lengthToNumber(1);
        var num         = parseFloat(numberArr[length]);

        var upperLimit  = 999999;   //上限点位
        var lowerLimit  = num;   //止损下限点位
        
        if (ostyle == 1) {
            if (stop_type == 1) {
                if (type == 1) {
                    if (val < upperLimit)
                        val += num;
                } else {
                    if (val > endloss)
                        val -= num;
                }
            } else {
                if (type == 1)  //加号
                {
                    if (val < endprofit)
                        val += num;
                } else {
                    if (val > lowerLimit)
                        val -= num;
                }
            }
        } else {
            if (stop_type == 1) {
                if (type == 1)  //加号
                {
                    if (val < endloss)
                        val += num;
                } else {
                    if (val > lowerLimit)
                        val -= num;
                }

            } else {
                if (type == 1)  //加号
                {
                    if (val < upperLimit)
                        val += num;
                } else {
                    if (val > endprofit)
                        val -= num;
                }
            }
        }

        arr = {};
        arr['val'] = val;

        return arr;
    }

    //计算大约止损价以及止盈价  如果当前亏损500 则不能再设置亏损小于500的点位，盈利反之
    function calculationPrice() {
        var ostyle = "{$order.ostyle}";
        var openPrice = $('.openPrice').html();
        var nowPrice = $('.alertNewPrice').html();

        if (ostyle == 1) //0涨1跌
        {
            if (nowPrice <= openPrice) {
                $('.EstimatePloss > em').first().html(openPrice);
                $('.EstimateProfit > em').first().html(nowPrice);
            } else {
                $('.EstimatePloss > em').first().html(nowPrice);
                $('.EstimateProfit > em').first().html(openPrice);
            }
        } else {
            if (nowPrice <= openPrice) {
                $('.EstimatePloss > em').first().html(nowPrice);
                $('.EstimateProfit > em').first().html(openPrice);
            } else {
                $('.EstimatePloss > em').first().html(openPrice);
                $('.EstimateProfit > em').first().html(nowPrice);
            }
        }
    }

    calculationPrice();


    /***********************************************************************/

    //计算预计亏损
    function SettingLoss() {
        var openPrice           = $('.openPrice').html();
        var capital_dot_length  = "{$option.capital_dot_length}";
        var wave                = "{$option.wave}";
        var number              = "{$order.onumber}";

        wave = wave * number;
        var ostyle = "{$order.ostyle}"; //0涨 1跌
        
        //计算止损价格
        var endloss     = $('.endloss').val();                      //获取输入框止损价格
        var lossPrice   = $('.EstimatePloss > em').first().html();  //最小止损价格
        var isFocus     = $('.endloss').is(":focus");               //获取止损焦点
        
        if(ostyle == 0)
        {
            if(endloss > lossPrice) {
                if(isFocus != true)
                    $('.endloss').val(lossPrice);
                
                endloss = lossPrice;
            }
        } else {
            if(endloss < lossPrice) {
                if(isFocus != true)
                    $('.endloss').val(lossPrice);
                
                endloss = lossPrice;
            }
        }
        
        var loss = (openPrice - endloss) * wave * capital_dot_length;
        $('.EstimatePloss > em').last().html('$' + Math.abs(loss.toFixed(2)));     //止损

        
        //计算止盈价格
        var endprofit       = $('.endprofit').val();
        var profitPrice     = $('.EstimateProfit > em').first().html();
        var profitIsFocus   = $('.endprofit').is(":focus"); //获取止盈焦点

        if(ostyle == 0)
        {
            if(endprofit < profitPrice ) {
                if(profitIsFocus != true)
                    $('.endprofit').val(profitPrice);
                
                endprofit = profitPrice;
            }
        } else {
            if(endprofit > profitPrice ) {
                if(profitIsFocus != true)
                    $('.endprofit').val(profitPrice);
                
                endprofit = profitPrice;
            }
        }
        
        var profit = (openPrice - endprofit) * wave * capital_dot_length;
        $('.EstimateProfit > em').last().html('$' + Math.abs(profit.toFixed(2))); //止盈
    }


    /**
     * [lengthToNumber 数字位数转换小说之]
     * @param  {[Number]} num [数字位数]
     * @author wang 990529346@qq.com
     */
    function lengthToNumber(num) {
        var numberArr = {};
        numberArr[0] = num;
        numberArr[1] = '0.' + num;
        numberArr[2] = '0.0' + num;
        numberArr[3] = '0.00' + num;
        numberArr[4] = '0.000' + num;
        numberArr[5] = '0.0000' + num;
        numberArr[6] = '0.00000' + num;
        numberArr[7] = '0.000000' + num;
        return numberArr;
    }

  /**
   * 手动输入止盈止损
   * @param  {[object]} obj       当前dom对象
   * @param  {[string]} className 类名称
   * @param  {[int]}    stop      止盈止损 1止盈 2止损
   */
    function targetMarket(obj,className,stop)
    {
        var minPrice    = parseFloat($('.'+className+' > em').first().html());      //最小价格
        var maxPrice    = parseFloat($('.'+className+' > em').first().html());      //最大价格
        var val         = parseFloat($(obj).val());
        var ostyle      = "{$order.ostyle}";        //0买入 1卖出

        var length      = "{$info.capital_length}"; //当前小数点位长度

        minPrice        = parseFloat(minPrice).toFixed(length);
        maxPrice        = parseFloat(maxPrice).toFixed(length);

        var upperLimit  = 999999;   //止盈上限点位
        var loperLimit  = 0;

        //如果当前价格小于最小止盈
        if(ostyle == 1)
        {
            if(stop == 2)
            {
                if(val < minPrice || val > upperLimit || isNaN(val))
                    $(obj).val(minPrice);
            } else {
                if(val > maxPrice || val <= loperLimit || isNaN(val))
                    $(obj).val(maxPrice);
            }
        } else {
            if(stop == 2)
            {
                if(val > minPrice || val <= loperLimit || isNaN(val))
                    $(obj).val(minPrice);
            } else {
                if(val < maxPrice || val > upperLimit || isNaN(val))
                    $(obj).val(maxPrice);
            }
        }
        SettingLoss();
    }

</script>
</body>
</html>

<script type="text/javascript" src="__PUBLIC__/Home/css/layer_mobile/layer.js"></script>
<script type="text/javascript">
    /**
     * [websocketByAcceptData 以websocket方式接受数据]
     * @return {[type]} [description]
     */
    
    var loading = "{$Think.lang.loading}";
    
    function websocketByAcceptData(index) {
        // ws = new WebSocket("ws://47.244.175.58:2346");
        ws = new WebSocket("ws://39.107.99.235:8026");
        ws.onopen = function () {
            ws.send('tom');
        };
        ws.onmessage = function (e) {

            var data = eval("(" + e.data + ")");
            var type = data.type || '';
            switch (type) {
                case 'init':
                    $.post('{:U("Bind/bindUid")}', {client_id: data.client_id}, function (data) {
                    }, 'json');
                    break;
                default :
                    data = JSON.parse(e.data);

                    var oid = "{$order.oid}";
                    if (oid != '') {
                        $.each(data.order, function (key, val) {
                            if (oid == val.oid) {

                                if(val.ploss <= 0)
                                {
                                    $('.ploss').removeClass('txt_green');
                                    $('.ploss').addClass('txt_red');

                                    $('#cover > li').first().find('span').last().removeClass('txt_green');
                                    $('#cover > li').first().find('span').last().addClass('txt_red');

                                } else {
                                    $('.ploss').removeClass('txt_red');
                                    $('.ploss').addClass('txt_green');

                                    $('#cover > li').first().find('span').last().removeClass('txt_red');
                                    $('#cover > li').first().find('span').last().addClass('txt_green');
                                }
                                
                                $('.ploss').html('$' + val.ploss);
                                $('.newPrice').html(val.sellprice);

                                $('#cover > li').first().find('span').last().html('$' + val.ploss);
                                $('#cover > li').last().find('span').last().html(val.sellprice);

                                //操作弹窗的价格
                                $('.alertNewPrice').html(val.sellprice);
                                SettingLoss(); //预计亏损
                                calculationPrice();

                                //剩余时长
                                $('.remaining_time').html(val.remainingTime+'s');
                            }
                        });
                    }
                    layer.close(index);
            }
        };
    }

    window.onload = function () {
        var index = layer.open({type: 2,shadeClose:false,content:loading});
        websocketByAcceptData(index);
    }

    //9分钟后刷新页面
    window.setTimeout("location.reload()", 540000);


    var arrString = "{$option.capital_key}";

    // ws = new WebSocket("ws://47.244.175.58:2346");
    ws = new WebSocket("ws://39.107.99.235:8026");
    ws.onopen = function () {
        ws.send('tom');
    };
    ws.onmessage = function (e) {

        var data = eval("(" + e.data + ")");
        var type = data.type || '';
        switch (type) {
            case 'init':
                $.post('{:U("Bind/binding")}', {client_id: data.client_id, group: arrString}, function (data) {
                }, 'json');
                break;
            default :
                var data = JSON.parse(e.data);
                var length = "{$info.capital_length}";

                price = data.Price.toFixed(length);

                try {
                    frames['nowtu'].updateData1M(price);
                } catch (e) {
                }
        }
    };

    //止盈止损参数提交
    function saveProfitAndLoss() {
        var oid         = "{$order.oid}";
        var endprofit   = $('.endprofit').val();
        var endloss     = $('.endloss').val();

        var index = layer.open({type: 2,shadeClose:false,content:loading});

        $.ajax({
            url: "{:U('saveProfitAndLoss')}",
            dataType: 'json',
            type: 'post',
            data: {'oid': oid, 'endprofit': endprofit, 'endloss': endloss},
            success: function (data) {
                layer.open({
                    content: data.msg
                    ,skin: 'msg'
                    ,time: 2 //2秒后自动关闭
                });

                if (data.code == 200)
                    setTimeout("window.location.reload()",1500);

                layer.close(index);
            },
            error: function (res) {
                console.log(res);
            }
        });
    }

    //订单平仓操作
    function cover() {
        var oid     = "{$order.oid}";
        var index = layer.open({type: 2,shadeClose:false,content:loading});

        $.ajax({
            url: "{:U('cover')}",
            dataType: 'json',
            type: 'post',
            data: {'oid': oid},
            success: function (data) {
                layer.open({
                    content: data.msg
                    ,skin: 'msg'
                    ,time: 2 //2秒后自动关闭
                });
                layer.close(index);
                if(data.code == 200){
                    setTimeout(" window.location.href='{:U('trade')}'",1000);
                }
            },
            error: function (res) {
                console.log(res);
            }
        });
    }
</script>


<script type="text/javascript">
    //追单操作
    function single()
    {
        var option_name = "{$order.option_name}";
        var ostyle      = "{$order.ostyle}" == 0 ? '{$Think.lang.api_buy}' : '{$Think.lang.api_sell}';
        var onumber     = "{$order.onumber}";


            var msg = '{$Think.lang.make_sure}'+' '+option_name+' '+ostyle+' '+onumber+' {$Think.lang.lots}?';
        layer.open({
            content: msg
            ,btn: ['{$Think.lang.determine}', '{$Think.lang.cancel}']
            ,shadeClose:false
            ,yes: function(index){

            var load    = layer.open({type: 2,shadeClose:false,content:loading});

            var pid     = "{$order.pid}";                           //下单产品
            var ostyle  = "{$order.ostyle}";                        //下单方向 0涨 1跌
            var number  = "{$order.onumber}";                       //下单手数
            var bond    = "{$order.Bond}";                          //下单保证金

            $.ajax({
                url: "{:U('Transaction/trade')}",
                dataType: 'json',
                type: 'post',
                data: {'pid':pid,'ostyle':ostyle,'number':number,'bond':bond},
                success: function (data) {
                    layer.open({
                        content: data.msg
                        ,skin: 'msg'
                        ,time: 2 //2秒后自动关闭
                    });
                    layer.close(index);
                    layer.close(load);
                    if(data.code == 200){
                        setTimeout(" window.location.reload()",500);
                    }
                }
            });
            }
        });
    }


    //平仓并追返单
    function returnSingle()
    {

        //平仓
        cover();

        //追返单
        var pid     = "{$order.pid}";                           //下单产品
        var ostyle  = "{$order.ostyle}" == 0 ? 1: 0;            //下单方向 0涨 1跌
        var number  = "{$order.onumber}";                       //下单手数
        var bond    = "{$order.Bond}";                          //下单保证金

        $.ajax({
            url: "{:U('Transaction/trade')}",
            dataType: 'json',
            type: 'post',
            data: {'pid':pid,'ostyle':ostyle,'number':number,'bond':bond},
            success: function (data) {
                layer.open({
                    content: data.msg
                    ,skin: 'msg'
                    ,time: 2 //2秒后自动关闭
                });
            }
        });
    }


</script>